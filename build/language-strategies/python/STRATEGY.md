# ğŸ Python è§£ææˆ¦ç•¥

## ğŸ¯ è¨€èªç‰¹æ€§ã¨èª²é¡Œ

### **ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆåœ°ç„ã¨ã®æˆ¦ã„**
```python
class OuterClass:
    def method1(self):
        def inner_function():
            if True:
                def deeply_nested():
                    pass
                return deeply_nested
        return inner_function
    
    def method2(self):
        pass
```

### **Pythonç‰¹æœ‰ã®å›°é›£**
| å•é¡Œ | ä¾‹ | å¯¾ç­–çŠ¶æ³ |
|------|----|----|
| **ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆæ§‹æ–‡** | `class A:\n    def f():` | âœ… PEGTLå¯¾å¿œæ¸ˆã¿ |
| **å‹•çš„é–¢æ•°å®šç¾©** | `setattr(obj, 'func', lambda: x)` | âŒ è«¦ã‚ |
| **ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿** | `@property\ndef getter():` | âŒ æœªå¯¾å¿œ |
| **ãƒã‚¹ãƒˆé–¢æ•°** | `def outer(): def inner():` | âš ï¸ è¦æ¤œè¨¼ |
| **ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰** | `@classmethod\ndef cm():` | âŒ æœªå¯¾å¿œ |

## ğŸ”§ æ¡ç”¨æˆ¦ç•¥: è¶…ã‚·ãƒ³ãƒ—ãƒ«åŒ–ä½œæˆ¦

### **Phase 1: æ¥µå°æ–‡æ³•ï¼ˆç„¡é™ãƒ«ãƒ¼ãƒ—å›é¿ï¼‰**
```cpp
// éå»ã®å¤±æ•—: è¤‡é›‘ãªPythonæ–‡æ³• â†’ ç„¡é™ãƒ«ãƒ¼ãƒ—
// æ–°æ–¹é‡: è¶…çµ¶ã‚·ãƒ³ãƒ—ãƒ«åŒ–

struct python_minimal : seq<
    ignore,
    opt<python_element>,
    star<any>  // æ®‹ã‚Šã¯ä½•ã§ã‚‚OKï¼ˆå®‰å…¨ç­–ï¼‰
> {};
```

**æ¤œå‡ºå¯¾è±¡:**
- âœ… `def function_name():` - åŸºæœ¬é–¢æ•°
- âœ… `class ClassName:` - åŸºæœ¬ã‚¯ãƒ©ã‚¹  
- âœ… `from module import name` - ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- â“ `async def async_func():` - éåŒæœŸé–¢æ•°

### **Phase 2: ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆç„¡è¦–æˆ¦ç•¥**
```cpp
// Pythonã®ç¾å­¦ã‚’æ¨ã¦ã¦å®Ÿç”¨æ€§ã‚’å–ã‚‹
struct python_function : seq<
    star<space>,  // ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯å˜ãªã‚‹ç©ºç™½ã¨ã—ã¦å‡¦ç†
    TAO_PEGTL_STRING("def"),
    plus<space>,
    identifier,
    one<'('>,
    until<one<')'>>,
    one<')'>,
    star<space>,
    one<':'>
> {};
```

### **Phase 3: ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚¹ã‚­ãƒƒãƒ—**
```cpp
// @decorator ã¯å‰å‡¦ç†ã§é™¤å»
std::string preprocess_python(const std::string& content) {
    std::vector<std::string> lines;
    for (const auto& line : split_lines(content)) {
        if (!starts_with(trim(line), "@")) {  // ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿è¡Œã‚’é™¤å»
            lines.push_back(line);
        }
    }
    return join(lines, "\n");
}
```

## ğŸ“Š ç¾åœ¨ã®çŠ¶æ³

**2025-07-28æ™‚ç‚¹:**
- âœ… PEGTLç§»è¡Œå®Œäº†ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆåœ°ç„æ”»ç•¥æ¸ˆã¿ï¼‰
- âœ… åŸºæœ¬çš„ãªã‚¯ãƒ©ã‚¹ãƒ»é–¢æ•°æ¤œå‡ºã¯å‹•ä½œ
- âš ï¸ å®Ÿéš›ã®Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ¤œè¨¼ãŒä¸è¶³

**ãƒ†ã‚¹ãƒˆå¯¾è±¡:**
- `requests` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ï¼‰
- ãƒªã‚¢ãƒ«ãƒ¯ãƒ¼ãƒ«ãƒ‰Pythonã‚³ãƒ¼ãƒ‰ã§ã®å‹•ä½œæ¤œè¨¼

## ğŸ§  è¨­è¨ˆæ€æƒ³

### **ã€ŒPythonã‚‰ã—ã•ã‚ˆã‚Šå®Ÿç”¨æ€§ã€**
```python
# Pythonã®ç¾ã—ã„ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆæ§‹é€ 
class Beautiful:
    def method(self):
        if condition:
            for item in items:
                result = process(item)
                yield result
                
# â†“ æˆ‘ã€…ã®è§£æã§ã¯
# class Beautiful: â† ã“ã‚Œã ã‘æ¤œå‡ºã§ãã‚Œã°OK
# def method(self): â† ã“ã‚Œã ã‘æ¤œå‡ºã§ãã‚Œã°OK
```

**å‰²ã‚Šåˆ‡ã‚Š:**
1. **ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆæ§‹é€ ã¯ç„¡è¦–** - å­˜åœ¨æ¤œå‡ºã®ã¿
2. **å‹•çš„ç”Ÿæˆã¯è«¦ã‚** - é™çš„ãªå®šç¾©ã®ã¿
3. **ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã¯å‰å‡¦ç†ã§é™¤å»** - ãƒã‚¤ã‚ºã¨ã—ã¦æ‰±ã†

## ğŸš¨ è«¦ã‚ã‚‹éƒ¨åˆ†

**å®Œç’§ã‚’æ±‚ã‚ãšã€å®Ÿç”¨æ€§é‡è¦–:**
- `exec()`, `eval()` å†…ã®å‹•çš„å®šç¾©
- ãƒ¡ã‚¿ã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚‹å‹•çš„ç”Ÿæˆ
- è¤‡é›‘ãªãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒã‚§ãƒ¼ãƒ³
- `__getattr__` ã«ã‚ˆã‚‹å‹•çš„ãƒ¡ã‚½ãƒƒãƒ‰

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

| ãƒ•ã‚¡ã‚¤ãƒ« | ç›®æ¨™æ¤œå‡ºæ•° | æœŸå¾…å€¤ |
|----------|------------|--------|
| **requests/api.py** | ~20é–¢æ•° | 15+ |
| **simple test** | 3-5è¦ç´  | å®Œå…¨æ¤œå‡º |

## ğŸ’¡ å®Ÿè£…ãƒ¡ãƒ¢

**æ•™è¨“:**
ã€ŒPythonã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆåœ°ç„ã¯ä¸€åº¦æ”»ç•¥æ¸ˆã¿ã€‚ä»Šåº¦ã¯å®Ÿæˆ¦æŠ•å…¥ã€

**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:**
1. requestsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã®å®Ÿæˆ¦ãƒ†ã‚¹ãƒˆ
2. ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å‰å‡¦ç†ã®å®Ÿè£…
3. å¿…è¦ã«å¿œã˜ã¦ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¿½åŠ 